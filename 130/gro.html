<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ГРО</title>
	<meta name="description" content="Поиск по точкам Геодезической разбивочной основы (ГРО) для Братского алюминиевого завода.">
	<link rel="stylesheet" href="/style.css">
	<link rel="icon" href="/favicon.png" type="image/png">
	<style>
		/* Убран @import Roboto Mono */
		.controls-container {
			max-width: 900px;
			margin: 20px 0;
			padding: 15px;
			border: 1px solid #eee;
			border-radius: 8px;
			background-color: #f9f9f9;
			display: flex;
			flex-direction: column;
			gap: 15px;
			font-family: var(--primary-font);
		}

		.control-row {
			display: flex;
			align-items: center;
			flex-wrap: wrap;
			gap: 10px;
			width: 100%;
		}

		.control-label {
			font-size: .95em;
			color: var(--text-color);
			margin-right: 5px;
			white-space: nowrap;
		}

		#search-input {
			padding: 10px 12px;
			border: 1px solid #ccc;
			border-radius: 4px;
			font-size: 1em;
			font-family: var(--primary-font);
			min-width: 250px;
			box-sizing: border-box;
			text-align: left;
			background-color: var(--background-color);
			color: var(--text-color);
		}

		/* .coord-toggle был удален, его стили можно убрать, но для чистоты оставлю пока, если вдруг понадобятся для других toggle */
		.search-mode-toggle,
		.note-toggle,
		.ignore-chars-toggle {
			padding: 5px;
			border: 1px solid #ccc;
			border-radius: 20px;
			display: inline-flex;
			background-color: #eee;
		}

		/* .coord-toggle input[type="radio"] был удален */
		.search-mode-toggle input[type="radio"],
		.note-toggle input[type="radio"],
		.ignore-chars-toggle input[type="radio"] {
			display: none;
		}

		/* .coord-toggle label был удален */
		.search-mode-toggle label,
		.note-toggle label,
		.ignore-chars-toggle label {
			display: inline-block;
			padding: 8px 15px;
			cursor: pointer;
			border-radius: 18px;
			transition: background-color .3s ease, color .3s ease;
			color: #555;
			font-family: var(--primary-font);
			font-size: .9em;
			white-space: nowrap;
		}

		/* .coord-toggle input[type="radio"]:checked+label был удален */
		.search-mode-toggle input[type="radio"]:checked+label,
		.note-toggle input[type="radio"]:checked+label,
		.ignore-chars-toggle input[type="radio"]:checked+label {
			background-color: #007bff;
			color: #fff;
		}

		#airtable-data-container {
			max-width: 900px;
			margin: 20px 0;
		}

		#airtable-message-state {
			color: var(--text-color);
			opacity: 0.8;
			font-family: var(--primary-font);
			padding: 20px;
			text-align: left;
		}

		#airtable-message-state.error {
			color: #d8000c;
			background-color: #ffd2d2;
			border: 1px solid #d8000c;
			padding: 10px;
			border-radius: 5px;
			display: inline-block;
			text-align: left;
			opacity: 1;
		}

		#output-list {
			font-family: monospace, var(--primary-font);
			text-align: left;
			background-color: #fdfdfd;
			border: 1px solid #eee;
			padding: 20px;
			margin-top: 15px;
			border-radius: 5px;
			line-height: 1.6;
			overflow-x: auto;
			color: var(--text-color);
		}

		.output-line {
			margin-bottom: 2px;
			padding-bottom: 3px;
			border-bottom: 1px dotted #eee;
		}

		.point-link {
			cursor: pointer;
			text-decoration: underline;
			color: #007bff;
			font-weight: bold;
		}

		.point-link:hover {
			color: #0056b3;
		}

		.popup-overlay {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.6);
			display: none;
			justify-content: center;
			align-items: center;
			z-index: 1000;
		}

		.popup-content {
			background-color: var(--background-color);
			padding: 30px;
			border-radius: 8px;
			max-width: 800px;
			max-height: 80vh;
			overflow-y: auto;
			position: relative;
			font-family: monospace, var(--primary-font);
			text-align: left;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
			color: var(--text-color);
		}

		.popup-close-btn {
			position: absolute;
			top: 10px;
			right: 15px;
			font-size: 24px;
			cursor: pointer;
			background: none;
			border: none;
			color: var(--text-color);
			opacity: 0.7;
		}

		.popup-close-btn:hover {
			opacity: 1;
		}

		#nearby-list {
			margin-top: 15px;
			line-height: 1.7;
		}

		#nearby-list .nearby-item {
			margin-bottom: 5px;
		}

		#nearby-list .nearby-distance {
			font-weight: bold;
			color: var(--text-color);
			opacity: 0.9;
			display: inline-block;
			min-width: 60px;
			text-align: right;
			margin-right: 10px;
		}

		#nearby-list .reference-point {
			font-weight: bold;
			margin-bottom: 10px;
			border-bottom: 1px solid #ccc;
			padding-bottom: 5px;
		}

		@media (prefers-color-scheme: dark) {
			.controls-container {
				border-color: #444;
				background-color: #2b2b2b;
			}

			#search-input {
				border-color: #555;
			}

			.search-mode-toggle,
			.note-toggle,
			.ignore-chars-toggle {
				border-color: #555;
				background-color: #3a3a3a;
			}

			.search-mode-toggle label,
			.note-toggle label,
			.ignore-chars-toggle label {
				color: #ccc;
			}

			#output-list {
				background-color: #252525;
				border-color: #444;
			}

			.output-line {
				border-bottom-color: #444;
			}

			#nearby-list .reference-point {
				border-bottom-color: #555;
			}
		}
	</style>
</head>

<body>
	<div class="page-container">
		<nav aria-label="breadcrumb" class="breadcrumbs">
			<ol>
				<li><a href="/index.html">Главная</a></li>
				<li><a href="/130/index.html">БрАЗ</a></li>
				<li class="current" aria-current="page">ГРО</li>
			</ol>
		</nav>
		<h1>Геодезическая разбивочная основа</h1>
		<h2>Быстрый поиск</h2>

		<div class="controls-container">
			<!-- Блок выбора системы координат удален -->
			<div class="control-row">
				<span class="control-label">Примечание:</span>
				<div class="note-toggle">
					<input type="radio" id="note-on" name="note-mode" value="on" checked>
					<label for="note-on">Вкл</label>
					<input type="radio" id="note-off" name="note-mode" value="off">
					<label for="note-off">Выкл</label>
				</div>
			</div>
			<div class="control-row">
				<span class="control-label">Совпадение:</span>
				<div class="search-mode-toggle">
					<input type="radio" id="search-contains" name="search-mode" value="contains" checked>
					<label for="search-contains">Содержит</label>
					<input type="radio" id="search-exact" name="search-mode" value="exact">
					<label for="search-exact">Точно</label>
				</div>
			</div>
			<div class="control-row">
				<span class="control-label">Игнор. спецсимв.:</span>
				<div class="ignore-chars-toggle">
					<input type="radio" id="ignore-off" name="ignore-mode" value="off" checked>
					<label for="ignore-off">Выкл</label>
					<input type="radio" id="ignore-on" name="ignore-mode" value="on">
					<label for="ignore-on">Вкл</label>
				</div>
			</div>
			<div class="control-row">
				<input type="text" id="search-input" placeholder="Поиск по названию...">
			</div>
		</div>

		<div id="airtable-data-container">
			<div id="airtable-message-state">Загрузка данных из Google Sheets...</div>
			<div id="output-list" style="display: none;"></div>
		</div>

		<div id="nearby-popup" class="popup-overlay" style="display: none;">
			<div class="popup-content">
				<button class="popup-close-btn" onclick="closeNearbyPopup()">×</button>
				<h3>Точки рядом (до 300м):</h3>
				<div id="nearby-list"></div>
			</div>
		</div>
		<section>
			<h2>Работа с данными</h2>
			<div>
				<a href="https://docs.google.com/spreadsheets/d/1gCYD5iGGQ2ROXwurQyvGi1B91iPoOqznbdpvNmujQDc/edit?usp=sharing" class="b">Просмотр таблицы</a>
				<a href="https://docs.google.com/spreadsheets/d/e/2PACX-1vRt42zSFK_wNZOglKlhc7Qlo5r1gBnp_2pKPibn3mItIZ_9ue5zsn5-gMCb3hJgH4riyLXrEMtQCppW/pub?gid=0&single=true&output=csv" class="b">Скачать CSV</a>
			</div>
		</section>
	</div>
<script src="/lib/gro-common.js"></script>
<script src="/lib/gro-130.js"></script>

</body>

</html>
